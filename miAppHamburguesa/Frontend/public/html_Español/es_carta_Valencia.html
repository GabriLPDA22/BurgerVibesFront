<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Sedgwick+Ave&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/miAppHamburguesa/Frontend/src/css/Menu/menu.css">
    <link rel="stylesheet" href="/miAppHamburguesa/Frontend/src/css/Bootstrap/icons.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Sedgwick+Ave&display=swap" rel="stylesheet">

    <title>MenuBurgerVibes</title>
</head>

<body>

    <nav>
        <div class="nav-content">
            <div class="logo">
                <a href="/miAppHamburguesa/Frontend/public/html_Español/es_index.html">
                    <img src="/miAppHamburguesa/Frontend/src/assets/img/Home/BurgerVibes.svg" alt="Logo">
                </a>
                <div class="restaurant-info">
                    <h1 class="restaurant-name" style="text-decoration: none;">BURGERVIBES VALENCIA</h1>
                </div>
            </div>

            <div class="login">
                <a href="#" id="loginBtn">
                    <i class="fas fa-user"></i> Iniciar sesión
                </a>
                <div id="userMenu" class="dropdown" style="display:none;">
                    <button type="button" id="dropdownMenuButton">
                        <i class="fas fa-user-check"></i> <!-- Añade el ícono aquí -->
                        <span id="usernameDisplay">GabrielPDA</span>
                    </button>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#"><i class="fas fa-shopping-cart"></i> Nuevo pedido</a>
                        <a class="dropdown-item" href="#"><i class="fas fa-clipboard-list"></i> Mis pedidos</a>
                        <a class="dropdown-item" href="#" onclick="signOut();"><i class="fas fa-sign-out-alt"></i>
                            Desconectar</a>
                    </div>
                </div>
            </div>

    </nav>


    <!--MODAL DEL LOGIN-->

    <div id="modalLogin" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h5>Inicio de sesión</h5>
            <form id="loginForm">
                <label for="username">Nombre de usuario:</label>
                <input type="text" id="username" required>
                <label for="password">Contraseña:</label>
                <input type="password" id="password" required>
                <button type="submit">Iniciar sesión</button>
            </form>
        </div>
    </div>

</body>
<script>
    // Obtener el modal
    var modal = document.getElementById("modalLogin");

    // Obtener el botón para abrir el modal
    var loginBtn = document.getElementById("loginBtn");

    // Obtener el elemento para cerrar el modal
    var closeBtn = document.getElementsByClassName("close")[0];

    // Abrir el modal al hacer clic en el botón de inicio de sesión
    loginBtn.onclick = function () {
        modal.style.display = "block";
    }

    // Cerrar el modal al hacer clic en la "x"
    closeBtn.onclick = function () {
        modal.style.display = "none";
    }

    // Cerrar el modal al hacer clic fuera del contenido
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Función para mostrar el menú del usuario y ocultar el botón de inicio de sesión
    function showUserMenu(username) {
        document.getElementById('loginBtn').style.display = 'none';
        document.getElementById('userMenu').style.display = 'block';
        document.getElementById('usernameDisplay').textContent = username;
    }

    // Manejo del formulario de inicio de sesión
    document.getElementById('loginForm').addEventListener('submit', function (e) {
        e.preventDefault();
        var username = document.getElementById('username').value;
        showUserMenu(username);
        modal.style.display = "none";
    });

    // Función para manejar el cierre de sesión
    function signOut() {
        document.getElementById('loginBtn').style.display = 'block';
        document.getElementById('userMenu').style.display = 'none';
    }

    document.getElementById('dropdownMenuButton').addEventListener('click', function (event) {
        var dropdownMenu = document.querySelector('.dropdown-menu');
        if (dropdownMenu.style.display === 'block') {
            dropdownMenu.style.display = 'none';
        } else {
            dropdownMenu.style.display = 'block';
        }

        // Previene que el clic se propague y cierre el menú inmediatamente
        event.stopPropagation();
    });

    // Cierra el menú desplegable si se hace clic fuera de él
    window.addEventListener('click', function (event) {
        var dropdownMenu = document.querySelector('.dropdown-menu');
        if (event.target !== dropdownMenu && !dropdownMenu.contains(event.target)) {
            dropdownMenu.style.display = 'none';
        }
    });

</script>

</html>